<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>家庭网络改造 on Linsama&#39;s Blog</title>
    <link>http://localhost:62448/categories/%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E6%94%B9%E9%80%A0/</link>
    <description>Recent content in 家庭网络改造 on Linsama&#39;s Blog</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Mon, 20 Nov 2023 21:19:58 +0800</lastBuildDate>
    <atom:link href="http://localhost:62448/categories/%E5%AE%B6%E5%BA%AD%E7%BD%91%E7%BB%9C%E6%94%B9%E9%80%A0/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>家庭网络改造 1： 路由器系统</title>
      <link>http://localhost:62448/posts/nas/home-server/</link>
      <pubDate>Mon, 20 Nov 2023 21:19:58 +0800</pubDate>
      <guid>http://localhost:62448/posts/nas/home-server/</guid>
      <description>&lt;h2 id=&#34;0-引言&#34;&gt;0. 引言&lt;/h2&gt;&#xA;&lt;p&gt;在日常的工作和生活之中，总有一些网络上的需求和问题需要解决。比如：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;如何访问 GitHub？&lt;/li&gt;&#xA;&lt;li&gt;如何在联机游戏中获得稳定的环境？&lt;/li&gt;&#xA;&lt;li&gt;不在家中如何访问 Nas 中的资源？&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;解决这些问题的一个简单途径，既是在家中搭建一个功能丰富的软路由系统，实现各种高级的网络功能，同时也是后续置办 Nas，搭建私有云的基础。&lt;/p&gt;&#xA;&lt;h2 id=&#34;1-网络环境概述&#34;&gt;1. 网络环境概述&lt;/h2&gt;&#xA;&lt;h3 id=&#34;11-总体架构&#34;&gt;1.1. 总体架构&lt;/h3&gt;&#xA;&lt;p&gt;&lt;img src=&#34;architecture.png&#34; alt=&#34;home-network-architecture&#34;&gt;&lt;/p&gt;&#xA;&lt;h3 id=&#34;12-设备清单&#34;&gt;1.2. 设备清单&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;光猫：使用运营商提供的光猫，包含了 WiFi 的功能，保障软路由即使挂掉，依然有网络可以访问&lt;/li&gt;&#xA;&lt;li&gt;软路由：一台 x86 或者 arm 的机器，文中使用的是 N5105&lt;/li&gt;&#xA;&lt;li&gt;AP 节点：用于扩展网络信号&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;13-方案选择&#34;&gt;1.3. 方案选择&lt;/h3&gt;&#xA;&lt;p&gt;将 OpenWrt 直接安装在软路由上，无疑可以获得最好的性能，但是此方案也存在一些弊端。如果在折腾 OpenWrt 系统的过程中出现某些异常，OpenWrt 无法访问，将影响全局的网络访问&lt;/p&gt;&#xA;&lt;p&gt;为了可以随时折腾家中的网络，同时保证家人的网络访问不受影响，我们选择在 PVE 上安装 OpenWrt 系统&lt;/p&gt;&#xA;&lt;h2 id=&#34;2-pve-的安装与配置&#34;&gt;2. PVE 的安装与配置&lt;/h2&gt;&#xA;&lt;h3 id=&#34;21-pve-系统安装&#34;&gt;2.1. PVE 系统安装&lt;/h3&gt;&#xA;&lt;p&gt;PVE 的安装可以参考 &lt;a href=&#34;https://pve.proxmox.com/wiki/Installation&#34;&gt;PVE 官方文档&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h3 id=&#34;22-pve-开启硬件直通&#34;&gt;2.2. PVE 开启硬件直通&lt;/h3&gt;&#xA;&lt;p&gt;为了获得更好的性能，可以在安装完成 PVE 后，开启硬件直通功能，将网卡直通给 OpenWrt 使用&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;1. 启用 IOMMU&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;在主机 BIOS 设置中启用 &lt;code&gt;VT-d&lt;/code&gt;（对于Intel处理器）或 &lt;code&gt;AMD-Vi&lt;/code&gt;（对于AMD处理器）功能。&lt;/p&gt;&#xA;&lt;p&gt;修改GRUB配置文件（通常是 &lt;code&gt;/etc/default/grub&lt;/code&gt;），添加或修改以下条目：&lt;/p&gt;&#xA;&lt;p&gt;Intel 处理器添加以下内容：&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
